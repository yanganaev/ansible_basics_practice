---
-  hosts: nodes
   vars:
     users:
     - username: "Alice"
       email: "alice@example.com"
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31653337323536366630643465623133353165366330373537323361636665663465663131316263
          6662356466343661323537333830363961313465346538660a343331353432633665316538383963
          64633432626535653932653833663766633166313737663462383437396665353933393861346136
          3938373162613762660a633266326633336633393463383435616334393037356630336366656362
          6437
     - username: "Bob"
       email: "bob@example.com"
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64386137333033336334376637396635636133366135346663346562343763323566616266336331
          6432356630383532383131366164386135353462613230620a393065613765626664323236666138
          30353138363430396532613635373035366630663334653333343739383631383036393833386461
          3838323464626462330a646236323239666435383833363339366335373661333664353935336263
          3465
     - username: "Carol"
       email: "carol@example.com"
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61636132656236326562643730353330623063663261356636336330633930623138333761393730
          3536626662326331643130643434376562373562343239350a656233326333313864346261623163
          33326234326338643431346463643165343662396137336464373533306333366561386137353761
          3964616263636233300a313632373861613963653463386265643061616164396533303035663630
          3638
   tasks:
   - name: Create user {{ item.username }}
     user:
       name: "{{ item.username }}"
       state: present
       comment: "{{ item.email }}"
       create_home: True
       password: "{{ item.pass | password_hash('sha512') }}"
       update_password: on_create
     with_items:
       - "{{ users }}"
...